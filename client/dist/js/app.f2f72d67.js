(function(t){function e(e){for(var n,o,i=e[0],c=e[1],l=e[2],u=0,d=[];u<i.length;u++)o=i[u],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);p&&p(e);while(d.length)d.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var t,e=0;e<s.length;e++){for(var r=s[e],n=!0,o=1;o<r.length;o++){var i=r[o];0!==a[i]&&(n=!1)}n&&(s.splice(e--,1),t=c(c.s=r[0]))}return t}var n={},o={app:0},a={app:0},s=[];function i(t){return c.p+"js/"+({}[t]||t)+"."+{"chunk-2d212c05":"1b908bd5","chunk-2d21ed65":"953611d7","chunk-2d221be6":"6c3d22b2","chunk-78122fdf":"e59819a8","chunk-881a21d4":"9dc9763d"}[t]+".js"}function c(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.e=function(t){var e=[],r={"chunk-78122fdf":1,"chunk-881a21d4":1};o[t]?e.push(o[t]):0!==o[t]&&r[t]&&e.push(o[t]=new Promise((function(e,r){for(var n="css/"+({}[t]||t)+"."+{"chunk-2d212c05":"31d6cfe0","chunk-2d21ed65":"31d6cfe0","chunk-2d221be6":"31d6cfe0","chunk-78122fdf":"1923e133","chunk-881a21d4":"cb05b66d"}[t]+".css",a=c.p+n,s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var l=s[i],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===n||u===a))return e()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){l=d[i],u=l.getAttribute("data-href");if(u===n||u===a)return e()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=e,p.onerror=function(e){var n=e&&e.target&&e.target.src||a,s=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=n,delete o[t],p.parentNode.removeChild(p),r(s)},p.href=a;var f=document.getElementsByTagName("head")[0];f.appendChild(p)})).then((function(){o[t]=0})));var n=a[t];if(0!==n)if(n)e.push(n[2]);else{var s=new Promise((function(e,r){n=a[t]=[e,r]}));e.push(n[2]=s);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=i(t);var d=new Error;l=function(e){u.onerror=u.onload=null,clearTimeout(p);var r=a[t];if(0!==r){if(r){var n=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+n+": "+o+")",d.name="ChunkLoadError",d.type=n,d.request=o,r[1](d)}a[t]=void 0}};var p=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(e)},c.m=t,c.c=n,c.d=function(t,e,r){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(r,n,function(e){return t[e]}.bind(null,n));return r},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=e,l=l.slice();for(var d=0;d<l.length;d++)e(l[d]);var p=u;s.push([0,"vendors~app"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";var n=r("8a23"),o=r.n(n);o.a},"3adf":function(t,e,r){"use strict";var n=r("8150"),o=r.n(n);o.a},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",{attrs:{id:"inspire"}},[r("v-app-bar",{attrs:{app:"",color:"#f5f5f5"}},[r("v-toolbar-title",[r("router-link",{staticClass:"toolbar-title black--text",attrs:{to:"/"}},[t._v("DisCounter")])],1),r("v-spacer"),r("v-toolbar-items",{style:t.$vuetify.breakpoint.mdAndUp?"padding-right: 16px;":""},[t._l(t.links,(function(e){return r("v-btn",{key:e.title,staticClass:"black--text",attrs:{to:e.url,text:"","active-class":"no-active"}},[r("v-icon",{attrs:{left:t.$vuetify.breakpoint.mdAndUp}},[t._v(t._s(e.icon))]),r("span",{staticClass:"hidden-sm-and-down"},[t._v(t._s(e.title))])],1)})),t.isUserLoggedIn?r("v-btn",{attrs:{text:"","active-class":"no-active"},on:{click:function(e){return e.stopPropagation(),t.openSettings(e)}}},[r("v-icon",{attrs:{left:t.$vuetify.breakpoint.mdAndUp}},[t._v(t._s(t.mdiAccountCog))]),r("span",{staticClass:"hidden-sm-and-down"},[t._v(" Profile ")])],1):t._e()],2)],1),r("v-dialog",{staticStyle:{"background-color":"#f5f5f5"},attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:t.settingsDialog,callback:function(e){t.settingsDialog=e},expression:"settingsDialog"}},[r("v-card",[r("v-toolbar",{attrs:{dark:"",color:"#5480e9"}},[r("v-btn",{attrs:{icon:"",dark:""},on:{click:t.close}},[r("v-icon",[t._v("mdi-close")])],1),r("v-toolbar-title",[t._v("Settings")]),r("v-spacer"),r("v-toolbar-items",[r("v-btn",{attrs:{dark:"",text:""},on:{click:t.save}},[t._v("Save")])],1)],1),r("v-list",{staticClass:"ml-2",attrs:{"three-line":"",subheader:""}},[r("v-subheader",[t._v("User Controls")]),r("v-list-item",[r("v-list-item-content",[r("v-list-item-title",[t._v("Change Email")]),r("v-row",[r("v-col",{attrs:{cols:"12",sm:"12",md:"4"}},[r("v-form",{ref:"emailForm",attrs:{"lazy-validation":"",onSubmit:"return false;"},model:{value:t.emailValid,callback:function(e){t.emailValid=e},expression:"emailValid"}},[r("v-text-field",{attrs:{label:"Email",name:"Email",hint:"Please use your real email, we will send activation email on it","prepend-icon":t.mdiEmail,type:"email",rules:t.emailRules},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1)],1)],1)],1)],1),r("v-list-item",[r("v-list-item-content",[r("v-list-item-title",[t._v("Change Password")]),r("v-row",[r("v-col",{attrs:{cols:"12",sm:"12",md:"4"}},[r("v-form",{ref:"pasForm",attrs:{"lazy-validation":"",onSubmit:"return false;"},model:{value:t.pasValid,callback:function(e){t.pasValid=e},expression:"pasValid"}},[r("v-text-field",{attrs:{label:"Password",name:"password",hint:"Password should contain at least 6 characters","prepend-icon":t.mdiLock,rules:t.passwordRules,type:t.show?"text":"password","append-icon":t.show?"mdi-eye":"mdi-eye-off"},on:{mousedown:function(e){t.show=!t.show},mouseup:function(e){t.show=!t.show},touchstart:function(e){t.show=!t.show},touchend:function(e){t.show=!t.show}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),r("v-text-field",{attrs:{label:"Confirm password",name:"password2","prepend-icon":t.mdiLock,rules:t.ConfPasswordRules,type:t.show?"text":"password","append-icon":t.show?"mdi-eye":"mdi-eye-off"},on:{mousedown:function(e){t.show=!t.show},mouseup:function(e){t.show=!t.show},touchstart:function(e){t.show=!t.show},touchend:function(e){t.show=!t.show}},model:{value:t.password2,callback:function(e){t.password2=e},expression:"password2"}})],1)],1)],1)],1)],1)],1),r("v-divider"),r("v-list",{staticClass:"ml-2",attrs:{"three-line":"",subheader:""}},[r("v-subheader",[t._v("General")]),r("v-list-item",[r("v-list-item-action",[r("v-switch",{attrs:{inset:"",color:"#5480e9"},model:{value:t.emailNotifications,callback:function(e){t.emailNotifications=e},expression:"emailNotifications"}})],1),r("v-list-item-content",[r("v-list-item-title",[t._v("Email notifications")]),r("v-list-item-subtitle",[t._v("Notify me about new sales for selected products with email")])],1)],1)],1),r("v-divider"),r("v-btn",{staticClass:"ml-3 mt-3 mb-5",attrs:{color:"red",text:""},on:{click:t.logout}},[r("v-icon",{attrs:{left:""}},[t._v(t._s(t.mdiLogout))]),t._v(" Logout ")],1),r("v-divider")],1)],1),r("v-content",{staticStyle:{"background-color":"#c1c8e2"}},[r("router-view")],1),t.error?[r("v-snackbar",{attrs:{"multi-line":!0,timeout:5e3,color:t.errorColor,value:!0},on:{input:t.closeError}},[t._v(" "+t._s(t.error)+" "),r("v-btn",{attrs:{dark:"",text:""},on:{click:t.closeError}},[t._v(" Close ")])],1)]:t._e()],2)},a=[],s=r("94ed"),i={data:function(){return{show:!1,drawer:!1,pasValid:!1,emailValid:!1,password:"",password2:"",email:"",mdiLock:s["g"],mdiEmail:s["f"],mdiLogout:s["i"],checkboxChanged:!1,settingsDialog:!1,mdiAccountCog:s["b"],passwordRules:[function(t){return!!t||"Password is required"},function(t){return t.length>=6||"Password must be equal or more than 6 characters"}],emailRules:[function(t){var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)||"Invalid e-mail."}]}},computed:{isUserLoggedIn:function(){return this.$store.getters.isUserLoggedIn},error:function(){return this.$store.getters.error},errorColor:function(){return this.$store.getters.errorColor},links:function(){return this.isUserLoggedIn?[{title:"Add product",icon:s["k"],url:"/add"}]:[{title:"Register",icon:s["c"],url:"/registration"},{title:"Login",icon:s["h"],url:"/login"}]},ConfPasswordRules:function(){var t=this;return[function(t){return!!t||"Password is required"},function(e){return e===t.password||"Password should match"}]},emailNotifications:{get:function(){return this.$store.getters.emailNotification},set:function(t){this.checkboxChanged=!0,this.$store.commit("setEmailNotification",t)}}},methods:{onLogout:function(){console.log("HI")},closeError:function(){this.$store.dispatch("clearError")},openSettings:function(){this.settingsDialog=!0},save:function(){var t=!0;""!==this.password&&""!==this.password2?this.$refs.pasForm.validate()?console.log("New password validated"):t=!1:this.$refs.pasForm.resetValidation(),""!==this.email?this.$refs.emailForm.validate()?console.log("New password validated"):t=!1:this.$refs.emailForm.resetValidation(),t&&((this.email||this.password||this.checkboxChanged)&&this.$store.dispatch("updateUser",{email:this.email?this.email:null,password:this.password?this.password:null,emailNotification:this.emailNotifications}).then((function(){})).catch((function(){})),this.settingsDialog=!1,this.checkboxChanged=!1,this.$refs.emailForm.resetValidation(),this.$refs.pasForm.resetValidation(),this.password=this.password2=this.email="")},close:function(){this.settingsDialog=!1,this.checkboxChanged=!1,this.$refs.emailForm.resetValidation(),this.$refs.pasForm.resetValidation(),this.password=this.password2=this.email=""},logout:function(){this.$store.dispatch("logout"),this.settingsDialog=!1}},created:function(){this.isUserLoggedIn&&this.$store.dispatch("loadProducts").then((function(){})).catch((function(){}))}},c=i,l=(r("034f"),r("2877")),u=r("6544"),d=r.n(u),p=r("7496"),f=r("40dc"),m=r("8336"),g=r("b0af"),h=r("62ad"),v=r("a75b"),b=r("169a"),w=r("ce7e"),k=r("4bd4"),_=r("132d"),x=r("8860"),y=r("da13"),P=r("1800"),C=r("5d23"),L=r("0fd9"),E=r("2db4"),S=r("2fa4"),V=r("e0c7"),A=r("b73d"),I=r("8654"),O=r("71d9"),R=r("2a7f"),$=Object(l["a"])(c,o,a,!1,null,null,null),j=$.exports;d()($,{VApp:p["a"],VAppBar:f["a"],VBtn:m["a"],VCard:g["a"],VCol:h["a"],VContent:v["a"],VDialog:b["a"],VDivider:w["a"],VForm:k["a"],VIcon:_["a"],VList:x["a"],VListItem:y["a"],VListItemAction:P["a"],VListItemContent:C["a"],VListItemSubtitle:C["b"],VListItemTitle:C["c"],VRow:L["a"],VSnackbar:E["a"],VSpacer:S["a"],VSubheader:V["a"],VSwitch:A["a"],VTextField:I["a"],VToolbar:O["a"],VToolbarItems:R["a"],VToolbarTitle:R["b"]});var N=r("9483");Object(N["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});r("d3b7");var U=r("8c4f"),D=r("bfaa"),T=r.n(D),B=r("2f62"),F=r("b85c"),z=(r("96cf"),r("1da1")),K=r("d4ec"),q=r("bc3a"),H=r.n(q),G=H.a.create({baseURL:"api.discounter.pp.ua/api/"}),Y=G,M=function t(e,r){Object(K["a"])(this,t),this.token=e,this.emailNotification=r},Q={state:{user:null},mutations:{setUser:function(t,e){t.user=e},logout:function(t){t.user=null},setEmailNotification:function(t,e){t.user.emailNotification=e},setBrowserNotification:function(t,e){t.user.browserNotification=e}},actions:{register:function(t,e){return Object(z["a"])(regeneratorRuntime.mark((function r(){var n,o,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.commit,o=e.login,a=e.email,s=e.password,n("clearError"),n("setLoading",!0),r.prev=4,r.next=7,Y.post("users/",{username:o,email:a,password:s});case 7:n("setLoading",!1),r.next=15;break;case 10:throw r.prev=10,r.t0=r["catch"](4),n("setLoading",!1),n("setError",r.t0.response.status),r.t0;case 15:case"end":return r.stop()}}),r,null,[[4,10]])})))()},login:function(t,e){return Object(z["a"])(regeneratorRuntime.mark((function r(){var n,o,a,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.commit,o=t.dispatch,a=e.login,s=e.password,n("clearError"),n("setLoading",!0),r.prev=4,r.next=7,Y.post("login/",{username:a,password:s});case 7:i=r.sent,n("setUser",new M(i.data.token,i.data.e_notifications)),o("loadProducts"),n("setLoading",!1),r.next=18;break;case 13:throw r.prev=13,r.t0=r["catch"](4),n("setLoading",!1),n("setError",r.t0.response.status),r.t0;case 18:case"end":return r.stop()}}),r,null,[[4,13]])})))()},activateAccount:function(t,e){return Object(z["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.commit,o=e.token,n("clearError"),n("setLoading",!0),r.prev=4,r.next=7,Y.get("users/".concat(o,"/activate"));case 7:n("setError","Your account was activated"),n("setColor","success"),n("setLoading",!1),r.next=22;break;case 12:if(r.prev=12,r.t0=r["catch"](4),404!==r.t0.response.status){r.next=19;break}n("setError","Your activation token is expired. Perform registration again"),n("setLoading",!1),r.next=22;break;case 19:throw n("setError",r.t0.response.status),n("setLoading",!1),r.t0;case 22:case"end":return r.stop()}}),r,null,[[4,12]])})))()},updateUser:function(t,e){return Object(z["a"])(regeneratorRuntime.mark((function r(){var n,o,a,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.commit,o=t.state,a=e.email,s=e.password,i=e.emailNotification,n("clearError"),n("setLoading",!0),r.prev=4,r.next=7,Y.patch("users/partial/",{email:a,password:s,e_notifications:i},{headers:{Authorization:"Token "+o.user.token}});case 7:n("setLoading",!1),r.next=15;break;case 10:throw r.prev=10,r.t0=r["catch"](4),n("setError",r.t0.response.status),n("setLoading",!1),r.t0;case 15:case"end":return r.stop()}}),r,null,[[4,10]])})))()},logout:function(t){var e=t.commit;e("logout"),e("setProducts",[])},resetRequest:function(t,e){return Object(z["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.commit,o=e.email,n("clearError"),n("setLoading",!0),r.prev=4,r.next=7,Y.post("password-reset",{email:o});case 7:n("setError","Email was sent"),n("setColor","success"),n("setLoading",!1),r.next=17;break;case 12:throw r.prev=12,r.t0=r["catch"](4),n("setError",r.t0.response.status),n("setLoading",!1),r.t0;case 17:case"end":return r.stop()}}),r,null,[[4,12]])})))()},resetPasswordPermission:function(t,e){return Object(z["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.commit,o=e.token,n("clearError"),n("setLoading",!0),r.prev=4,r.next=7,Y.get("password-reset/".concat(o));case 7:n("setLoading",!1),r.next=14;break;case 10:throw r.prev=10,r.t0=r["catch"](4),404===r.t0.response.status?(n("setError","Your activation token is expired."),n("setLoading",!1)):(n("setError",r.t0.response.status),n("setLoading",!1)),r.t0;case 14:case"end":return r.stop()}}),r,null,[[4,10]])})))()},resetPasswordSet:function(t,e){return Object(z["a"])(regeneratorRuntime.mark((function r(){var n,o,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.commit,o=e.token,a=e.password,n("clearError"),n("setLoading",!0),r.prev=4,r.next=7,Y.post("password-reset/".concat(o),{password:a});case 7:n("setLoading",!1),r.next=14;break;case 10:throw r.prev=10,r.t0=r["catch"](4),404===r.t0.response.status?(n("setError","Your activation token is expired."),n("setLoading",!1)):(n("setError",r.t0.response.status),n("setLoading",!1)),r.t0;case 14:case"end":return r.stop()}}),r,null,[[4,10]])})))()},saveNotificationToken:function(t,e){return Object(z["a"])(regeneratorRuntime.mark((function r(){var n,o,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.commit,o=t.state,a=e.token,s={registration_id:a,type:"web"},n("clearError"),n("setLoading",!0),r.next=7,Y.post("notification-token/",s,{headers:{Authorization:"Token "+o.user.token}}).then((function(){console.log("Successfully saved notification token!")})).catch((function(t){if(console.log("Error: could not save notification token"),t.response)if(console.log(t.response.status),t.response.data.registration_id){var e,r=Object(F["a"])(t.response.data.registration_id);try{for(r.s();!(e=r.n()).done;){var n=e.value;console.log(n)}}catch(n){r.e(n)}finally{r.f()}}else console.log("No reason returned by backend");else t.request?console.log("A network error occurred."):console.log(t.message)}));case 7:n("setLoading",!1);case 8:case"end":return r.stop()}}),r)})))()}},getters:{user:function(t){return t.user},isUserLoggedIn:function(t){return null!==t.user},emailNotification:function(t){try{return t.user.emailNotification}catch(e){return null}}}},W={state:{loading:!1,error:null,errorColor:"error",pageLoading:!1},mutations:{setLoading:function(t,e){t.loading=e},setError:function(t,e){t.error=e},setColor:function(t,e){t.errorColor=e},clearError:function(t){t.error=null,t.errorColor="error"},setPageLoading:function(t,e){t.pageLoading=e}},actions:{setLoading:function(t,e){var r=t.commit;r("setLoading",e)},setError:function(t,e){var r=t.commit;r("setError",e)},clearError:function(t){var e=t.commit;e("clearError")},setPageLoading:function(t,e){var r=t.commit;r("setPageLoading",e)}},getters:{loading:function(t){return t.loading},error:function(t){return t.error},errorColor:function(t){return t.errorColor},pageLoading:function(t){return t.pageLoading}}},J=(r("4de4"),{state:{products:[],product:null},mutations:{setProducts:function(t,e){t.products=e},setProduct:function(t,e){t.products.push(e),t.product=e},delProduct:function(t,e){t.products=t.products.filter((function(t){return t.api_id===e})),t.product=null}},actions:{addProduct:function(t,e){return Object(z["a"])(regeneratorRuntime.mark((function r(){var n,o,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.commit,o=t.rootState,a=e.aliUrl,n("clearError"),n("setLoading",!0),r.prev=4,r.next=7,Y.post("products/",{ali_url:a},{headers:{Authorization:"Token "+o.userStore.user.token}});case 7:s=r.sent,n("setProduct",s.data),n("setLoading",!1),r.next=18;break;case 12:throw r.prev=12,r.t0=r["catch"](4),console.log(r.t0.response),n("setLoading",!1),n("setError",r.t0.response.status),r.t0;case 18:case"end":return r.stop()}}),r,null,[[4,12]])})))()},loadProducts:function(t){return Object(z["a"])(regeneratorRuntime.mark((function e(){var r,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,n=t.rootState,r("clearError"),r("setLoading",!0),e.prev=3,e.next=6,Y.get("products/",{headers:{Authorization:"Token "+n.userStore.user.token}});case 6:o=e.sent,r("setProducts",o.data),r("setLoading",!1),e.next=16;break;case 11:throw e.prev=11,e.t0=e["catch"](3),r("setLoading",!1),r("setError",e.t0.response.status),e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,11]])})))()},deleteProduct:function(t,e){return Object(z["a"])(regeneratorRuntime.mark((function r(){var n,o,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.commit,o=t.rootState,a=e.api_id,n("clearError"),n("setLoading",!0),r.prev=4,r.next=7,Y.delete("products/"+a+"/",{headers:{Authorization:"Token "+o.userStore.user.token}});case 7:n("delProduct",a),n("setLoading",!1),r.next=16;break;case 11:throw r.prev=11,r.t0=r["catch"](4),n("setLoading",!1),n("setError",r.t0.response.status),r.t0;case 16:case"end":return r.stop()}}),r,null,[[4,11]])})))()}},getters:{getDiscountedProducts:function(t){return t.products.filter((function(t){return null!==t.current_price}))},getNormalProducts:function(t){return t.products.filter((function(t){return null===t.current_price&&null!==t.price}))},getNAProducts:function(t){return t.products.filter((function(t){return null===t.price}))},getProduct:function(t){return t.product}}}),Z=r("0e44"),X=r("a78e"),tt=r("5530"),et=r("a002"),rt=r.n(et),nt=r("bfa9");function ot(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e){var r=new nt["a"](Object(tt["a"])(Object(tt["a"])({},t),{},{storage:rt.a,asyncStorage:!0,restoreState:function(t,r){return new Promise((function(n){r.getItem(t).then((function(t){n(t),e._vm.$root.$emit("storageReady")}))}))}}));return r.plugin(e)}}n["a"].use(B["a"]);var at=new B["a"].Store({modules:{userStore:Q,sharedStore:W,productsStore:J},plugins:[ot({paths:["userStore"],getState:function(t){return X["getJSON"](t)},setState:function(t,e){return X["set"](t,e,{expires:3,secure:!1,samesite:"strict"})}}),Object(Z["a"])({strictMode:!1,modules:[J]})],state:{},mutations:{},actions:{}});function st(t,e,r){at.getters.isUserLoggedIn?r():r("/login?loginError=true")}function it(t,e,r){at.getters.isUserLoggedIn?r("/"):r()}function ct(t,e,r){at.dispatch("activateAccount",{token:t.params.token}).then((function(){})).catch((function(){})),r("/")}function lt(t,e,r){at.dispatch("resetPasswordPermission",{token:t.params.token}).then((function(){r()})).catch((function(){r("/")}))}var ut=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[t.notOnSale.length+t.onSale.length+t.notAvailable.length===0?r("v-row",{attrs:{wrap:""}},[r("v-col",{attrs:{cols:"12",sm:"8",md:"6","offset-sm":"2","offset-md":"3"}},[r("v-card",{staticStyle:{"background-color":"#f5f5f5"}},[t.isUserLoggedIn?r("v-card-text",{staticClass:"text-center",class:[t.$vuetify.breakpoint.mdAndUp?"headline":"subtitle-2"]},[t._v(" You doesn't add any products yet. "),r("router-link",{staticClass:"noLine",attrs:{to:"/add",tag:"a"}},[t._v("Add it now.")])],1):r("v-card-text",{staticClass:"text-center",class:[t.$vuetify.breakpoint.mdAndUp?"headline":"subtitle-2"]},[t._v(" You are not logged in. Please "),r("router-link",{staticClass:"noLine",attrs:{to:"/login",tag:"a"}},[t._v("log in")]),t._v(" or "),r("router-link",{staticClass:"noLine",attrs:{to:"/registration",tag:"a"}},[t._v("create a new account")])],1)],1)],1)],1):r("v-row",{attrs:{wrap:"",align:"start",justify:"center"}},[0!==t.onSale.length?r("v-col",{staticClass:"text-center pb-0",attrs:{cols:"12",sm:"12",md:"12"}},[r("h1",{staticClass:"font-weight-light headline text-uppercase"},[t._v("Products on sale")])]):t._e(),t._l(t.onSale,(function(e){return r("v-col",{key:e.api_id,attrs:{cols:"12",sm:"12",md:"4"}},[r("v-card",{staticClass:"mr-2 ml-2",staticStyle:{"background-color":"#f5f5f5"},attrs:{height:"500px"}},[r("v-img",{staticClass:"ma-3",attrs:{height:"250px",src:e.image},on:{click:function(r){return r.stopPropagation(),t.openImage(e.image)}}}),r("v-card-title",{staticClass:"text-wrap"},[t._v(" "+t._s(t.$vuetify.breakpoint.mdAndUp?e.name.slice(0,75)+"...":e.name.slice(0,65)+"...")+" ")]),r("v-card-text",{staticClass:"text-left font-weight-medium",class:[t.$vuetify.breakpoint.mdAndUp?"headline":"subtitle-2 mt-2"]},[t._v(" Price:"),r("span",{staticClass:"green--text"},[t._v(t._s(e.current_price?e.current_price:e.price)+" ")]),e.current_price?r("span",{staticClass:"red--text",class:[t.$vuetify.breakpoint.mdAndUp?"subtitle-1":"overline"],staticStyle:{"text-decoration":"line-through"}},[t._v(t._s(e.price)+" ")]):t._e()]),r("v-card-actions",{staticClass:"mt-2"},[r("v-spacer"),r("v-btn",{attrs:{text:"",color:"red"}},[r("v-icon",{attrs:{left:""}},[t._v(t._s(t.mdiDelete))]),t._v(" Remove ")],1),r("v-btn",{attrs:{text:"",color:"green",href:e.ali_url,target:"_blank"}},[r("v-icon",{attrs:{left:""}},[t._v(t._s(t.mdiCart))]),t._v(" Buy ")],1)],1)],1)],1)})),0!==t.notOnSale.length?r("v-col",{staticClass:"text-center pb-0",attrs:{cols:"12",sm:"12",md:"12"}},[r("h1",{staticClass:"font-weight-light headline text-uppercase"},[t._v("Products without sale price")])]):t._e(),t._l(t.notOnSale,(function(e){return r("v-col",{key:e.api_id,attrs:{cols:"12",sm:"12",md:"4"}},[r("v-card",{staticClass:"mr-2 ml-2",staticStyle:{"background-color":"#f5f5f5"},attrs:{height:"500px"}},[r("v-img",{staticClass:"ma-3",attrs:{height:"250px",src:e.image},on:{click:function(r){return r.stopPropagation(),t.openImage(e.image)}}}),r("v-card-title",{staticClass:"text-wrap"},[t._v(" "+t._s(t.$vuetify.breakpoint.mdAndUp?e.name.slice(0,75)+"...":e.name.slice(0,65)+"...")+" ")]),r("v-card-text",{staticClass:"text-left font-weight-medium",class:[t.$vuetify.breakpoint.mdAndUp?"headline":"subtitle-2 mt-2"]},[t._v(" Price:"),r("span",{staticClass:"green--text"},[t._v(t._s(e.current_price?e.current_price:e.price)+" ")]),e.current_price?r("span",{staticClass:"red--text",class:[t.$vuetify.breakpoint.mdAndUp?"subtitle-1":"overline"],staticStyle:{"text-decoration":"line-through"}},[t._v(t._s(e.current_price)+" ")]):t._e()]),r("v-card-actions",{staticClass:"mt-2"},[r("v-spacer"),r("v-btn",{attrs:{text:"",color:"red"}},[r("v-icon",{attrs:{left:""}},[t._v(t._s(t.mdiDelete))]),t._v(" Remove ")],1),r("v-btn",{attrs:{text:"",color:"green",href:e.ali_url,target:"_blank"}},[r("v-icon",{attrs:{left:""}},[t._v(t._s(t.mdiCart))]),t._v(" Buy ")],1)],1)],1)],1)})),0!==t.notAvailable.length?r("v-col",{staticClass:"text-center pb-0",attrs:{cols:"12",sm:"12",md:"12"}},[r("h1",{staticClass:"font-weight-light headline text-uppercase"},[t._v("Not available products")])]):t._e(),t._l(t.notAvailable,(function(e){return r("v-col",{key:e.api_id,attrs:{cols:"12",sm:"12",md:"4"}},[r("v-card",{staticClass:"mr-2 ml-2",staticStyle:{"background-color":"#f5f5f5"},attrs:{height:"500px"}},[r("v-img",{staticClass:"ma-3",attrs:{height:"250px",src:e.image},on:{click:function(r){return r.stopPropagation(),t.openImage(e.image)}}}),r("v-card-title",{staticClass:"text-wrap"},[t._v(" "+t._s(t.$vuetify.breakpoint.mdAndUp?e.name.slice(0,75)+"...":e.name.slice(0,65)+"...")+" ")]),r("v-card-actions",{staticClass:"mt-2"},[r("v-spacer"),r("v-btn",{attrs:{text:"",color:"red"}},[r("v-icon",{attrs:{left:""}},[t._v(t._s(t.mdiDelete))]),t._v(" Remove ")],1),r("v-btn",{attrs:{text:"",color:"green",href:e.ali_url,target:"_blank"}},[r("v-icon",{attrs:{left:""}},[t._v(t._s(t.mdiCart))]),t._v(" Buy ")],1)],1)],1)],1)})),r("v-dialog",{model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("v-card",{attrs:{"max-height":"1000px"}},[r("v-img",{staticClass:"zoom-out",attrs:{src:t.openedSrc,"max-height":"1000px",contain:""},on:{click:function(e){t.dialog=!1}}})],1)],1)],2)],1)},dt=[],pt=r("59ca"),ft=r.n(pt),mt=(r("741f"),{name:"List",data:function(){return{dialog:!1,mdiCart:s["d"],mdiDelete:s["e"],openedSrc:"",products:[{api_id:"4000918899813",name:"DOOGEE S95 Pro 8 Гб 256 ГБ модульный прочный мобильный телефон IP68/IP69K 6,3-дюймовый дисплей 5150 мАч Helio P90 Восьмиядерный 48 МП камера Android 9",price:"30345.77",current_price:null,image:"https://ae01.alicdn.com/kf/H94d5587dc2724f0e86bfe4a5cd759987R/DOOGEE-S95-Pro-8-256-IP68-IP69K.jpg",ali_url:"https://aliexpress.ru/item/4000918899813.html"},{api_id:"4000918899814",name:"DOOGEE S95 Pro 8 Гб 256 ГБ модульный прочный мобильный телефон IP68/IP69K 6,3-дюймовый дисплей 5150 мАч Helio P90 Восьмиядерный 48 МП камера Android 9",price:"30345.77",current_price:"30345.77",image:"https://ae01.alicdn.com/kf/H94d5587dc2724f0e86bfe4a5cd759987R/DOOGEE-S95-Pro-8-256-IP68-IP69K.jpg",ali_url:"https://aliexpress.ru/item/4000918899813.html"},{api_id:"4000918899815",name:"DOOGEE S95 Pro 8 Гб 256 ГБ модульный прочный мобильный телефон IP68/IP69K 6,3-дюймовый дисплей 5150 мАч Helio P90 Восьмиядерный 48 МП камера Android 9",price:"30345.77",current_price:null,image:"https://ae01.alicdn.com/kf/H94d5587dc2724f0e86bfe4a5cd759987R/DOOGEE-S95-Pro-8-256-IP68-IP69K.jpg",ali_url:"https://aliexpress.ru/item/4000918899813.html"},{api_id:"4000918899816",name:"Самостоятельная щетка для грумера для кошек, принадлежности для ухода за домашними животными, расческа для удаления волос для кошек, собак, обрезка волос, массажное устройство для кошек С Кошачьей Мятой",price:"272.71",current_price:"0.77",image:"https://ae01.alicdn.com/kf/H1ac0fed0fcab4b47b03ea555413ae1f3N/-.jpg",ali_url:"https://aliexpress.ru/item/4000417010920.html"}]}},methods:{openImage:function(t){this.dialog=!0,this.openedSrc=t}},computed:{onSale:function(){return this.$store.getters.getDiscountedProducts},isUserLoggedIn:function(){return this.$store.getters.isUserLoggedIn},notOnSale:function(){return this.$store.getters.getNormalProducts},notAvailable:function(){return this.$store.getters.getNAProducts}},mounted:function(){var t=this;if(this.$route.query.authorized&&this.isUserLoggedIn){var e={apiKey:"AIzaSyBEj1Soso2Un1_9d-QnjQI7vLVYL6E4HqQ",authDomain:"discounter.firebaseapp.com",databaseURL:"https://discounter.firebaseio.com",projectId:"discounter",storageBucket:"discounter.appspot.com",messagingSenderId:"642427961332",appId:"1:642427961332:web:3ded7ef52f192355afc3a1",measurementId:"G-7YKGMVBD1R"};ft.a.initializeApp(e);var r=ft.a.messaging();r.usePublicVapidKey("BPjeQ8MLtiKImF4yFG7tSKu3kB2dv8WvfQOZpj13PKzP_8BNAuMWf4W2_zBSca1PY_BdWbQF0i-0WwU9p2RpI40"),Notification.requestPermission().then((function(){console.log("Notification permission granted."),r.getToken().then((function(e){t.$store.dispatch("saveNotificationToken",{token:e})}))})).catch((function(t){console.log("Unable to retrieve refreshed token ",t)})),r.onTokenRefresh((function(){r.getToken().then((function(t){this.$store.dispatch("saveNotificationToken",{token:t})})).catch((function(t){console.log("Unable to retrieve refreshed token ",t)}))}))}}}),gt=mt,ht=(r("3adf"),r("99d9")),vt=r("a523"),bt=r("adda"),wt=Object(l["a"])(gt,ut,dt,!1,null,null,null),kt=wt.exports;d()(wt,{VBtn:m["a"],VCard:g["a"],VCardActions:ht["a"],VCardText:ht["b"],VCardTitle:ht["c"],VCol:h["a"],VContainer:vt["a"],VDialog:b["a"],VIcon:_["a"],VImg:bt["a"],VRow:L["a"],VSpacer:S["a"]}),n["a"].use(U["a"]);var _t=[{path:"/",name:"Home",component:kt},{path:"/add",name:"Add",component:function(){return r.e("chunk-78122fdf").then(r.bind(null,"37d1"))},beforeEnter:st},{path:"/login",name:"Login",component:function(){return r.e("chunk-881a21d4").then(r.bind(null,"d60c"))},beforeEnter:it},{path:"/registration",name:"Registration",component:function(){return r.e("chunk-2d221be6").then(r.bind(null,"cc3c"))},beforeEnter:it},{path:"/activate/:token",name:"Activation",beforeEnter:T()([ct,it])},{path:"/password-reset",name:"Password reset",component:function(){return r.e("chunk-2d21ed65").then(r.bind(null,"d6eb"))},beforeEnter:it},{path:"/password-reset/:token",name:"Password set",component:function(){return r.e("chunk-2d212c05").then(r.bind(null,"aa6e"))},beforeEnter:T()([lt,it])}],xt=new U["a"]({mode:"history",base:"/",routes:_t}),yt=xt,Pt=r("f309");r("5363");n["a"].use(Pt["a"]);var Ct=new Pt["a"]({icons:{iconfont:"mdiSvg"}});r("d5e8");n["a"].config.productionTip=!1,new n["a"]({router:yt,store:at,vuetify:Ct,render:function(t){return t(j)}}).$mount("#app")},8150:function(t,e,r){},"8a23":function(t,e,r){}});
//# sourceMappingURL=app.f2f72d67.js.map